{"version":3,"sources":["webpack:///./src/views/HandWritingBoard3/index.vue?6481","webpack:///./src/views/HandWritingBoard3/index.vue?2231","webpack:///src/views/HandWritingBoard3/index.vue","webpack:///./src/views/HandWritingBoard3/index.vue?2936","webpack:///./src/views/HandWritingBoard3/index.vue?d42d"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","app","_v","staticStyle","attrs","filePath","canvasWidth","canvasHeight","on","$event","handleSelectTouch","style","top","menuTop","left","menuLeft","onMenuStart","onMenuMove","onMenuEnd","class","menuShow","onClickMenuBtn","mouseStatus","handleGetContainer","model","value","callback","$$v","adjustVisible","expression","slot","lineWidth","background","lineColor","colorVisible","pickerColor","_e","onClickEdit","eraserVisible","eraserWidth","onClickEraser","onUndo","onReduction","onClear","onGenerate","staticRenderFns","scriptUrl","name","props","path","type","String","default","components","IconFont","data","offsetWidth","offsetHeight","c1px","c1py","boardData","boardStatus","menuX","menuY","watch","now","hex8","computed","navigator","userAgent","includes","mounted","init","methods","canvas","ctx","getContext","setBoardStatus","$message","info","handleDraw","moveTo","lineTo","x","y","stroke","onBrushStart","offsetLeft","e","target","offsetTop","beginPath","strokeStyle","lineCap","lineJoin","touches","clientX","clientY","onBrushMove","onBrushEnd","closePath","clearRect","$nextTick","$emit","$refs","writingCanvas","toDataURL","onEraserStart","clearArc","onEraserMove","clearLine","onEraserEnd","save","arc","radius","Math","PI","clip","restore","endX","endY","sinX","cosY","box","getInitialCapital","val","replace","putImageData","length","slice","push","_data","handleBorderJudgment","component"],"mappings":"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","file":"js/board3.62098646.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=075c0b37&lang=css&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=075c0b37&lang=css&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"box\",staticClass:\"hand-writing\"},[(!_vm.app)?_c('div',{staticStyle:{\"height\":\"100%\"}},[(_vm.filePath)?_c('img',{attrs:{\"src\":_vm.filePath,\"alt\":\"\"}}):_c('canvas',{ref:\"writingCanvas\",staticClass:\"writing-box\",attrs:{\"width\":_vm.canvasWidth,\"height\":_vm.canvasHeight},on:{\"touchstart\":function($event){return _vm.handleSelectTouch($event, 'start')},\"touchmove\":function($event){return _vm.handleSelectTouch($event, 'move')},\"touchend\":function($event){return _vm.handleSelectTouch($event, 'end')}}}),_c('div',{staticClass:\"menu-box\",style:({ top: (_vm.menuTop + \"px\"), left: (_vm.menuLeft + \"px\") }),on:{\"touchstart\":function($event){return _vm.onMenuStart($event)},\"touchmove\":function($event){return _vm.onMenuMove($event)},\"touchend\":function($event){return _vm.onMenuEnd($event)}}},[_c('div',{staticClass:\"menu-list\",class:{ 'list-show': _vm.menuShow }},[_c('div',{staticClass:\"menu-btn\",class:{ 'btn-checked': _vm.menuShow },on:{\"click\":_vm.onClickMenuBtn}},[_c('span',{staticClass:\"menu-btn-item\"}),_c('span',{staticClass:\"menu-btn-item\"}),_c('span',{staticClass:\"menu-btn-item\"})]),_c('div',{staticClass:\"list-item\",class:{ 'item-checked': _vm.mouseStatus === 'brush' }},[_c('a-popover',{attrs:{\"placement\":\"right\",\"arrowPointAtCenter\":true,\"getPopupContainer\":_vm.handleGetContainer},model:{value:(_vm.adjustVisible),callback:function ($$v) {_vm.adjustVisible=$$v},expression:\"adjustVisible\"}},[_c('template',{slot:\"title\"},[_c('div',{staticClass:\"adjust-header\"},[_c('span',[_vm._v(\"调节笔画\")]),_c('a-icon',{attrs:{\"type\":\"close-circle\"},on:{\"click\":function($event){_vm.adjustVisible = false}}})],1)]),_c('template',{slot:\"content\"},[_c('div',{staticClass:\"adjust-content\"},[_c('a-row',[_c('a-col',{attrs:{\"span\":8}},[_vm._v(\"线条粗细\")]),_c('a-col',{attrs:{\"span\":16}},[_c('a-slider',{attrs:{\"min\":1,\"max\":20},model:{value:(_vm.lineWidth),callback:function ($$v) {_vm.lineWidth=$$v},expression:\"lineWidth\"}})],1)],1),_c('a-row',[_c('a-col',{attrs:{\"span\":8}},[_vm._v(\"线条颜色\")]),_c('a-col',{attrs:{\"span\":16}},[_c('div',{staticClass:\"color-body\",style:({ background: _vm.lineColor }),on:{\"click\":function($event){_vm.colorVisible = true}}}),(_vm.colorVisible)?_c('div',{staticClass:\"picker-box\"},[_c('a-icon',{staticClass:\"picker-cancel\",attrs:{\"type\":\"close-circle\"},on:{\"click\":function($event){_vm.colorVisible = false}}}),_c('chrome-picker',{model:{value:(_vm.pickerColor),callback:function ($$v) {_vm.pickerColor=$$v},expression:\"pickerColor\"}})],1):_vm._e()])],1)],1)]),_c('a-icon',{attrs:{\"type\":\"edit\"},on:{\"click\":_vm.onClickEdit}})],2)],1),_c('div',{staticClass:\"list-item\",class:{ 'item-checked': _vm.mouseStatus === 'eraser' }},[_c('a-popover',{attrs:{\"placement\":\"right\",\"arrowPointAtCenter\":true,\"getPopupContainer\":_vm.handleGetContainer},model:{value:(_vm.eraserVisible),callback:function ($$v) {_vm.eraserVisible=$$v},expression:\"eraserVisible\"}},[_c('template',{slot:\"title\"},[_c('div',{staticClass:\"adjust-header\"},[_c('span',[_vm._v(\"调节橡皮擦\")]),_c('a-icon',{attrs:{\"type\":\"close-circle\"},on:{\"click\":function($event){_vm.eraserVisible = false}}})],1)]),_c('template',{slot:\"content\"},[_c('div',{staticClass:\"adjust-content\"},[_c('a-row',[_c('a-col',{attrs:{\"span\":8}},[_vm._v(\"橡皮宽度\")]),_c('a-col',{attrs:{\"span\":16}},[_c('a-slider',{attrs:{\"min\":1,\"max\":50},model:{value:(_vm.eraserWidth),callback:function ($$v) {_vm.eraserWidth=$$v},expression:\"eraserWidth\"}})],1)],1)],1)]),_c('icon-font',{attrs:{\"type\":\"icon-eraser\"},on:{\"click\":_vm.onClickEraser}})],2)],1),_c('div',{staticClass:\"list-item\"},[_c('a-icon',{attrs:{\"type\":\"undo\"},on:{\"click\":_vm.onUndo}})],1),_c('div',{staticClass:\"list-item\"},[_c('a-icon',{attrs:{\"type\":\"redo\"},on:{\"click\":_vm.onReduction}})],1),_c('div',{staticClass:\"list-item\"},[_c('a-icon',{attrs:{\"type\":\"delete\"},on:{\"click\":_vm.onClear}})],1),_c('div',{staticClass:\"list-item\"},[_c('a-icon',{attrs:{\"type\":\"save\"},on:{\"click\":_vm.onGenerate}})],1)])])]):_c('div',[_vm._v(\"暂不支持QQ浏览器,请选择其他浏览器打开。\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div ref=\"box\" class=\"hand-writing\">\r\n    <div v-if=\"!app\" style=\"height: 100%\">\r\n      <img v-if=\"filePath\" :src=\"filePath\" alt=\"\" />\r\n      <canvas\r\n        v-else\r\n        ref=\"writingCanvas\"\r\n        class=\"writing-box\"\r\n        :width=\"canvasWidth\"\r\n        :height=\"canvasHeight\"\r\n        @touchstart=\"handleSelectTouch($event, 'start')\"\r\n        @touchmove=\"handleSelectTouch($event, 'move')\"\r\n        @touchend=\"handleSelectTouch($event, 'end')\"\r\n      >\r\n      </canvas>\r\n      <div\r\n        class=\"menu-box\"\r\n        :style=\"{ top: `${menuTop}px`, left: `${menuLeft}px` }\"\r\n        @touchstart=\"onMenuStart($event)\"\r\n        @touchmove=\"onMenuMove($event)\"\r\n        @touchend=\"onMenuEnd($event)\"\r\n      >\r\n        <div :class=\"{ 'list-show': menuShow }\" class=\"menu-list\">\r\n          <div\r\n            :class=\"{ 'btn-checked': menuShow }\"\r\n            class=\"menu-btn\"\r\n            @click=\"onClickMenuBtn\"\r\n          >\r\n            <span class=\"menu-btn-item\"></span>\r\n            <span class=\"menu-btn-item\"></span>\r\n            <span class=\"menu-btn-item\"></span>\r\n          </div>\r\n          <div\r\n            :class=\"{ 'item-checked': mouseStatus === 'brush' }\"\r\n            class=\"list-item\"\r\n          >\r\n            <a-popover\r\n              v-model=\"adjustVisible\"\r\n              placement=\"right\"\r\n              :arrowPointAtCenter=\"true\"\r\n              :getPopupContainer=\"handleGetContainer\"\r\n            >\r\n              <template slot=\"title\">\r\n                <div class=\"adjust-header\">\r\n                  <span>调节笔画</span>\r\n                  <a-icon type=\"close-circle\" @click=\"adjustVisible = false\" />\r\n                </div>\r\n              </template>\r\n              <template slot=\"content\">\r\n                <div class=\"adjust-content\">\r\n                  <a-row>\r\n                    <a-col :span=\"8\">线条粗细</a-col>\r\n                    <a-col :span=\"16\">\r\n                      <a-slider :min=\"1\" :max=\"20\" v-model=\"lineWidth\" />\r\n                    </a-col>\r\n                  </a-row>\r\n                  <a-row>\r\n                    <a-col :span=\"8\">线条颜色</a-col>\r\n                    <a-col :span=\"16\">\r\n                      <div\r\n                        class=\"color-body\"\r\n                        :style=\"{ background: lineColor }\"\r\n                        @click=\"colorVisible = true\"\r\n                      ></div>\r\n                      <div class=\"picker-box\" v-if=\"colorVisible\">\r\n                        <a-icon\r\n                          class=\"picker-cancel\"\r\n                          type=\"close-circle\"\r\n                          @click=\"colorVisible = false\"\r\n                        />\r\n                        <chrome-picker v-model=\"pickerColor\" />\r\n                      </div>\r\n                    </a-col>\r\n                  </a-row>\r\n                </div>\r\n              </template>\r\n              <a-icon type=\"edit\" @click=\"onClickEdit\" />\r\n            </a-popover>\r\n          </div>\r\n          <div\r\n            :class=\"{ 'item-checked': mouseStatus === 'eraser' }\"\r\n            class=\"list-item\"\r\n          >\r\n            <a-popover\r\n              v-model=\"eraserVisible\"\r\n              placement=\"right\"\r\n              :arrowPointAtCenter=\"true\"\r\n              :getPopupContainer=\"handleGetContainer\"\r\n            >\r\n              <template slot=\"title\">\r\n                <div class=\"adjust-header\">\r\n                  <span>调节橡皮擦</span>\r\n                  <a-icon type=\"close-circle\" @click=\"eraserVisible = false\" />\r\n                </div>\r\n              </template>\r\n              <template slot=\"content\">\r\n                <div class=\"adjust-content\">\r\n                  <a-row>\r\n                    <a-col :span=\"8\">橡皮宽度</a-col>\r\n                    <a-col :span=\"16\">\r\n                      <a-slider :min=\"1\" :max=\"50\" v-model=\"eraserWidth\" />\r\n                    </a-col>\r\n                  </a-row>\r\n                </div>\r\n              </template>\r\n              <icon-font type=\"icon-eraser\" @click=\"onClickEraser\" />\r\n            </a-popover>\r\n          </div>\r\n          <div class=\"list-item\"><a-icon type=\"undo\" @click=\"onUndo\" /></div>\r\n          <div class=\"list-item\">\r\n            <a-icon type=\"redo\" @click=\"onReduction\" />\r\n          </div>\r\n          <div class=\"list-item\"><a-icon type=\"delete\" @click=\"onClear\" /></div>\r\n          <div class=\"list-item\">\r\n            <a-icon type=\"save\" @click=\"onGenerate\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-else>暂不支持QQ浏览器,请选择其他浏览器打开。</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Chrome } from \"vue-color\";\r\nimport { Icon } from \"ant-design-vue\";\r\nconst IconFont = Icon.createFromIconfontCN({\r\n  scriptUrl: \"//at.alicdn.com/t/font_1372570_awwwx5suzr.js\"\r\n});\r\nexport default {\r\n  name: \"HandWriting\",\r\n  props: {\r\n    path: {\r\n      type: String,\r\n      default: \"\"\r\n    }\r\n  },\r\n  components: {\r\n    IconFont,\r\n    \"chrome-picker\": Chrome\r\n  },\r\n  data: function() {\r\n    return {\r\n      // 画板坐标\r\n      offsetWidth: 0,\r\n      offsetHeight: 0,\r\n      // 画板宽度\r\n      canvasWidth: 500,\r\n      // 画板高度\r\n      canvasHeight: 500,\r\n      // 线条宽度\r\n      lineWidth: 10,\r\n      // 橡皮擦宽度\r\n      eraserWidth: 10,\r\n      // 调色板颜色\r\n      pickerColor: {},\r\n      // 线条颜色\r\n      lineColor: \"#000\",\r\n      // 图片地址\r\n      filePath: \"\",\r\n      // 辅助坐标\r\n      c1px: 0,\r\n      c1py: 0,\r\n      adjustVisible: false,\r\n      colorVisible: false,\r\n      eraserVisible: false,\r\n      // 鼠标状态: brush eraser\r\n      mouseStatus: \"brush\",\r\n      // 绘画状态\r\n      boardData: [],\r\n      boardStatus: 0,\r\n      // 菜单相关\r\n      menuShow: false,\r\n      menuTop: 0,\r\n      menuLeft: 0,\r\n      menuX: 0,\r\n      menuY: 0\r\n    };\r\n  },\r\n  watch: {\r\n    pickerColor: function(now) {\r\n      this.lineColor = now.hex8;\r\n    }\r\n  },\r\n  computed: {\r\n    app() {\r\n      if (navigator.userAgent.includes(\"QQBrowser\")) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    // 画板初始化\r\n    init() {\r\n      this.mouseStatus = \"brush\";\r\n      this.boardStatus = -1;\r\n      this.boardData = [];\r\n      // 获取canvas\r\n      const canvas = this.$refs.writingCanvas;\r\n      this.canvasWidth = canvas.offsetWidth;\r\n      this.canvasHeight = canvas.offsetHeight;\r\n      // 获取context对象\r\n      this.ctx = canvas.getContext(\"2d\");\r\n      if (this.path !== \"\") {\r\n        this.filePath = this.path;\r\n      } else {\r\n        this.setBoardStatus(\r\n          this.ctx.getImageData(0, 0, this.canvasWidth, this.canvasHeight)\r\n        );\r\n      }\r\n    },\r\n    // 判断画笔属性\r\n    handleSelectTouch(e, type) {\r\n      if (this.mouseStatus) {\r\n        let _data = this.getInitialCapital(this.mouseStatus);\r\n        switch (type) {\r\n          case \"start\":\r\n            this[`on${_data}Start`](e);\r\n            break;\r\n          case \"move\":\r\n            this[`on${_data}Move`](e);\r\n            break;\r\n          case \"end\":\r\n            this[`on${_data}End`](e);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      } else {\r\n        this.$message.info(\"请先选择画笔\");\r\n      }\r\n    },\r\n    handleDraw(e) {\r\n      // 获取点击点的坐标\r\n      let x = e.touches[0].clientX - this.offsetLeft;\r\n      let y = e.touches[0].clientY - this.offsetTop - 38;\r\n      // 绘制\r\n      this.ctx.moveTo(this.c1px, this.c1py);\r\n      this.ctx.lineTo(x, y);\r\n      this.ctx.stroke();\r\n      this.c1px = x;\r\n      this.c1py = y;\r\n    },\r\n    // 开始触摸\r\n    onBrushStart(e) {\r\n      // 获取偏移量\r\n      this.offsetLeft = e.target.offsetLeft;\r\n      this.offsetTop = e.target.offsetTop;\r\n      this.ctx.beginPath();\r\n      this.ctx.lineWidth = this.lineWidth;\r\n      this.ctx.strokeStyle = this.lineColor;\r\n      this.ctx.lineCap = \"round\";\r\n      this.ctx.lineJoin = \"round\";\r\n      this.c1px = e.touches[0].clientX - this.offsetLeft;\r\n      this.c1py = e.touches[0].clientY - this.offsetTop - 38;\r\n      this.handleDraw(e);\r\n    },\r\n    // 移动\r\n    onBrushMove(e) {\r\n      this.handleDraw(e);\r\n    },\r\n    // 停止触摸\r\n    onBrushEnd() {\r\n      this.ctx.closePath();\r\n      this.setBoardStatus(\r\n        this.ctx.getImageData(0, 0, this.canvasWidth, this.canvasHeight)\r\n      );\r\n    },\r\n    // 点击取消\r\n    onClear() {\r\n      this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n      this.filePath = \"\";\r\n      this.$nextTick(() => {\r\n        this.init();\r\n      });\r\n      // 清除的回调\r\n      this.$emit(\"onClear\");\r\n    },\r\n    // 点击确认\r\n    onGenerate() {\r\n      if (this.filePath) {\r\n        this.filePath = this.filePath;\r\n      } else {\r\n        this.filePath = this.$refs.writingCanvas.toDataURL();\r\n        // 生成图片的回调\r\n        this.$emit(\"onComplete\", this.filePath);\r\n      }\r\n      this.mouseStatus = \"\";\r\n    },\r\n\r\n    // 橡皮擦移动开始\r\n    onEraserStart(e) {\r\n      this.offsetLeft = e.target.offsetLeft;\r\n      this.offsetTop = e.target.offsetTop;\r\n      this.c1px = e.touches[0].clientX - this.offsetLeft;\r\n      this.c1py = e.touches[0].clientY - this.offsetTop - 38;\r\n      this.clearArc(this.c1px, this.c1py, this.eraserWidth / 2);\r\n      // this.clearArc(e, this.lineWidth / 2);\r\n    },\r\n    onEraserMove(e) {\r\n      this.clearLine(e, this.eraserWidth / 2);\r\n    },\r\n    // 橡皮擦移动结束\r\n    onEraserEnd() {\r\n      this.setBoardStatus(\r\n        this.ctx.getImageData(0, 0, this.canvasWidth, this.canvasHeight)\r\n      );\r\n    },\r\n    // 画圆\r\n    clearArc(x, y, radius) {\r\n      this.ctx.save();\r\n      this.ctx.beginPath();\r\n      this.ctx.arc(x, y, radius, 0, 2 * Math.PI);\r\n      this.ctx.clip();\r\n      this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n      this.ctx.restore();\r\n    },\r\n    // 画矩形\r\n    clearLine(e, radius) {\r\n      this.offsetLeft = e.target.offsetLeft;\r\n      this.offsetTop = e.target.offsetTop;\r\n      let endX = e.touches[0].clientX - this.offsetLeft;\r\n      let endY = e.touches[0].clientY - this.offsetTop - 38;\r\n      this.clearArc(endX, endY, radius);\r\n\r\n      // 计算辅助边长\r\n      let sinX =\r\n        radius * Math.sin(Math.atan((endY - this.c1py) / (endX - this.c1px)));\r\n      let cosY =\r\n        radius * Math.cos(Math.atan((endY - this.c1py) / (endX - this.c1px)));\r\n      this.ctx.save();\r\n      this.ctx.beginPath();\r\n      this.ctx.moveTo(this.c1px - sinX, this.c1py + cosY);\r\n      this.ctx.lineTo(this.c1px + sinX, this.c1py - cosY);\r\n      this.ctx.lineTo(endX + sinX, endY - cosY);\r\n      this.ctx.lineTo(endX - sinX, endY + cosY);\r\n      this.ctx.closePath();\r\n      this.ctx.clip();\r\n      this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n      this.ctx.restore();\r\n      this.c1px = endX;\r\n      this.c1py = endY;\r\n    },\r\n\r\n    // 挂载DOM\r\n    handleGetContainer() {\r\n      return this.$refs.box;\r\n    },\r\n    // 将字符串转换为首字母大写的形式\r\n    getInitialCapital(val) {\r\n      return val.replace(/\\S/, item => item.toUpperCase());\r\n    },\r\n    // 撤销\r\n    onUndo() {\r\n      this.boardStatus--;\r\n      if (this.boardStatus >= 0) {\r\n        this.ctx.putImageData(this.boardData[this.boardStatus], 0, 0);\r\n      } else {\r\n        this.boardStatus++;\r\n        this.$message.info(\"已经是第一步了\");\r\n      }\r\n    },\r\n    // 还原\r\n    onReduction() {\r\n      this.boardStatus++;\r\n      if (this.boardStatus < this.boardData.length) {\r\n        this.ctx.putImageData(this.boardData[this.boardStatus], 0, 0);\r\n      } else {\r\n        this.boardStatus--;\r\n        this.$message.info(\"已经是最新的了\");\r\n      }\r\n    },\r\n    setBoardStatus(data) {\r\n      if (this.boardStatus < this.boardData.length - 1) {\r\n        this.boardData = this.boardData.slice(0, this.boardStatus + 1);\r\n      }\r\n      this.boardData.push(data);\r\n      this.boardStatus += 1;\r\n    },\r\n\r\n    // 展开菜单\r\n    onClickMenuBtn() {\r\n      this.menuShow = !this.menuShow;\r\n    },\r\n    // 菜单移动三部曲\r\n    onMenuStart(e) {\r\n      this.menuX = e.touches[0].clientX;\r\n      this.menuY = e.touches[0].clientY;\r\n    },\r\n    onMenuMove(e) {\r\n      this.menuShow = false;\r\n      let x = e.touches[0].clientX;\r\n      let y = e.touches[0].clientY;\r\n      this.menuTop += y - this.menuY;\r\n      this.menuLeft += x - this.menuX;\r\n      let _data = this.handleBorderJudgment(this.menuLeft, this.menuTop);\r\n      this.menuTop = _data.top;\r\n      this.menuLeft = _data.left;\r\n      this.menuX = x;\r\n      this.menuY = y;\r\n    },\r\n    onMenuEnd() {\r\n      //   console.log(\"object\");\r\n    },\r\n    // 移动边界判断\r\n    handleBorderJudgment(left, top) {\r\n      if (left < 0) {\r\n        left = 0;\r\n      } else if (left > this.canvasWidth - 35) {\r\n        left = this.canvasWidth - 35;\r\n      }\r\n      if (top < 0) {\r\n        top = 0;\r\n      } else if (top > this.canvasHeight - 27) {\r\n        top = this.canvasHeight - 27;\r\n      }\r\n      return {\r\n        left,\r\n        top\r\n      };\r\n    },\r\n    // 点击画笔\r\n    onClickEdit() {\r\n      this.adjustVisible = true;\r\n      this.mouseStatus = \"brush\";\r\n    },\r\n    // 点击橡皮\r\n    onClickEraser() {\r\n      this.eraserVisible = true;\r\n      this.mouseStatus = \"eraser\";\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n.hand-writing {\r\n    position: relative;\r\n    width: 100%;\r\n    height: calc(100vh - 38px);\r\n    background: #fff;\r\n    overflow: hidden;\r\n}\r\n\r\n.writing-box {\r\n    display: block;\r\n    margin: 0 auto;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.adjust-header {\r\n    display: flex;\r\n    width: 188px;\r\n}\r\n\r\n.adjust-header span {\r\n    flex: 1;\r\n}\r\n\r\n.adjust-header .anticon{\r\n    flex: 1;\r\n    text-align: right;\r\n    line-height: 21px;\r\n}\r\n.ant-row {\r\n    line-height: 36px;\r\n}\r\n.color-body {\r\n    margin-left: 5px;\r\n    vertical-align: sub;\r\n    display: inline-block;\r\n    width: 15px;\r\n    height: 15px;\r\n    border-radius: 50%;\r\n    background: #000;\r\n}\r\n.picker-box {\r\n  position: fixed;\r\n  top: 38px;\r\n  left: 60px;\r\n  padding: 10px;\r\n  background: #fff;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n}\r\n.picker-box .picker-cancel {\r\n  float: right;\r\n  height: 20px;\r\n  line-height: 20px;\r\n}\r\n\r\n.picker-box .vc-chrome {\r\n  box-shadow: 0 0 0;\r\n}\r\n\r\n/* 伸缩菜单 */\r\n.menu-box {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 999;\r\n    width: auto;\r\n    height: auto;\r\n    background: #fff;\r\n}\r\n\r\n.menu-box div.list-show {\r\n    height: 100%;\r\n    padding-bottom: 10px;\r\n}\r\n\r\n.menu-box .menu-list {\r\n    padding-bottom: 10px;\r\n    width: 35px;\r\n    height: 27px;\r\n    border: 1px solid #000;\r\n    border-radius: 5px;\r\n    text-align: center;\r\n    overflow: hidden;\r\n}\r\n\r\n.menu-box .menu-list .menu-btn {\r\n    display: inline-block;\r\n    width: 20px;\r\n    height: 100%;\r\n    /* padding: 1px 0; */\r\n    line-height: 3px;\r\n}\r\n.menu-box .menu-list .menu-btn .menu-btn-item {\r\n    display: inline-block;\r\n    width: 20px;\r\n    height: 2px;\r\n    background: #666;\r\n    border-radius: 5px;\r\n    transition: transform .5s;\r\n}\r\n\r\n.btn-checked .menu-btn-item:first-child {\r\n    transform: translateY(7px) rotate(45deg);\r\n}\r\n.menu-box .menu-list .btn-checked .menu-btn-item:nth-child(2) {\r\n    display: none;\r\n}\r\n.btn-checked .menu-btn-item:last-child {\r\n    transform: rotate(-45deg);\r\n}\r\n.menu-box .menu-list .list-item {\r\n    display: inline-block;\r\n    width: 25px;\r\n    height: 25px;\r\n    border-radius: 5px;\r\n    margin-top: 5px;\r\n}\r\n.item-checked {\r\n    border: 1px solid #000;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=075c0b37&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=075c0b37&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"075c0b37\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}